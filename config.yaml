# EvoFace-Attendance 專案設定檔

# 系統硬體與全域設定
system:
  camera_index: 0
  app_name: "EvoFace - AI 人臉辨識考勤系統"
  # 推論硬體模式: "auto" (自動偵測), "gpu" (強制 GPU), "cpu" (強制 CPU)
  # 此設定將影響 liveness_engine.py 與未來的 recognizer.py
  device_mode: "auto" # "gpu", "cpu", "auto"

# 資料庫與模型路徑設定
database:
  db_path: "data/attendance.db"
  image_save_path: "data/faces/"
  # MediaPipe Tasks 人臉關鍵點模型路徑
  model_path: "models/face_landmarker.task"
  # Silent-Face 活體防禦模型路徑 (ONNX 格式)
  liveness_model: "models/liveness/2.7_80x80_MiniFASNetV2.onnx"

# 考勤邏輯設定
attendance:
  debounce_minutes: 1
  day_cutoff: "04:00" # 日切點：凌晨 4 點前打卡算「昨天」

# 三班制定義 (Format: HH:MM)
# 邏輯：一班 9 小時 (含休 1 小時)。
shifts:
  morning:
    name: "早班"
    start_time: "08:00"  # 標準上班
    end_time: "17:00"    # 標準下班
    range_start: "05:00" # 自動判斷區間起
    range_end: "11:00"   # 自動判斷區間止
  
  evening:
    name: "晚班"
    start_time: "16:00"
    end_time: "01:00"    # 跨日
    range_start: "13:00"
    range_end: "19:00"

  night:
    name: "大夜班"
    start_time: "00:00"
    end_time: "09:00"
    range_start: "21:00"
    range_end: "03:00"

# 演算法門檻值設定
thresholds:
  # 1. 幾何活體檢測門檻 (動作與視差累積)
  liveness_score: 1.0
  
  # 2. Silent-Face 紋理活體門檻 (0.0 ~ 1.0)
  # 建議值 0.85 ~ 0.95，數值越高對翻拍影片的防禦越強，但對光線要求也越高
  texture_liveness: 0.98
  
  # 3. MediaPipe 偵測信心度
  detection_confidence: 0.6
  tracking_confidence: 0.6

  # 4. 人臉辨識相關門檻
  recognition_confidence: 0.5
  evolution_confidence: 0.5 # 有了 dynamic feature 之後會調升成0.85
  warning_base_score: 0.3       # Base 分數低於此值顯示黃字警告
  evolution_min_base: 0.5       # 特徵演進條件：Base 最低要求
  evolution_min_dynamic: 0.85   # 特徵演進條件：Dynamic 強度要求

# 人臉辨識核心參數設定
recognition:
  min_face_ratio: 0.2  # 人臉佔畫面的最小比例 (太遠不偵測)
  base_weight: 0.4
  dynamic_weight: 0.6